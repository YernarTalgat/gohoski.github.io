<!DOCTYPE html>
<html>
<head>
<title>ScratchCount — Счётчик лайков и звёздочек</title>
<style>
body {
   	background: #000000;
	color: #fff;
}
</style>
<script>
alert("Внимание: данный инструмент был скрыт с сайта из-за нестабильности. Но вы всё равно можете им пользоваться");
function startCount() {
    var id = document.getElementById("idProject").value;
    if(id == undefined) {
        alert("Пожалуйста, напишите ID проекта.");
    } else {
        setInterval(function() {
            let xhr = new XMLHttpRequest();
            xhr.open('GET', 'https://cors-anywhere.herokuapp.com/https://api.scratch.mit.edu/projects/' + id);
            xhr.responseType = 'json';
            xhr.send();
            xhr.onload = function() {
              let responseObj = xhr.response;
              document.getElementById("likeCount").innerHTML = responseObj.stats.loves;
              document.getElementById("favCount").innerHTML = responseObj.stats.favorites;
            };
			console.log("loop" + id);
        }, 7500);
    }
}
</script>
</head>
<body>
<center><img src="../banner.png"></center>
<center><h1>ScratchCount</h1><h2>Счётчик лайков и звёздочек Scratch проекта в реальном времени</h2></center>
<center>ID проекта: <input value="104" id="idProject"><button onclick="startCount()">Пуск!</button></center>
<center><h2>❤  ⠀ ⠀⭐</h2>
<font size="10" id="likeCount">???</font> ⠀⠀⠀<font size="10" id="favCount">???</font></center>
</body>
</html>
